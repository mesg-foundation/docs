(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{428:function(t,e,a){"use strict";a.r(e);var s=a(33),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"emit-an-event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emit-an-event"}},[t._v("#")]),t._v(" Emit an Event")]),t._v(" "),a("h2",{attrs:{id:"why-emit-an-event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-emit-an-event"}},[t._v("#")]),t._v(" Why emit an Event?")]),t._v(" "),a("p",[t._v("Events are emitted from a Service (e.g.: a web server receiving a request, or a blockchain technology receiving a new transaction). These events are emitted to achieve a desired effect or to be used as a trigger to make another task happen. Each Service has different kinds of events that you can send to the Engine.")]),t._v(" "),a("h2",{attrs:{id:"steps-to-follow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps-to-follow"}},[t._v("#")]),t._v(" Steps to follow")]),t._v(" "),a("p",[t._v("To emit events from your Service, you'll need to:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#event-definitions"}},[t._v("Add the definition of the event")]),t._v(" in the Service's "),a("RouterLink",{attrs:{to:"/guide/service/service-file.html"}},[a("code",[t._v("mesg.yml")])]),t._v(" file")],1),t._v(" "),a("li",[a("a",{attrs:{href:"#emit-an-event-2"}},[t._v("Emit the event")]),t._v(" when it happens on the Service")])]),t._v(" "),a("h2",{attrs:{id:"event-definitions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-definitions"}},[t._v("#")]),t._v(" Event definitions")]),t._v(" "),a("p",[t._v("To create an event, the first step is to update the Service's "),a("RouterLink",{attrs:{to:"/guide/service/service-file.html"}},[a("code",[t._v("mesg.yml")])]),t._v(" file and add an event indexed by its key with the following attributes:")],1),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("Attribute")])]),t._v(" "),a("th",[a("strong",[t._v("Type")])]),t._v(" "),a("th",[a("strong",[t._v("Default")])]),t._v(" "),a("th",[a("strong",[t._v("Description")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("name")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("id")])]),t._v(" "),a("td",[t._v("Name of the event. If the name is not set, it will be the same as the ID you choose for the event.")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("description")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v('""')])]),t._v(" "),a("td",[t._v("Describe the event, what's its purpose is and why users would want to use it.")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("data")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("map<id,"),a("RouterLink",{attrs:{to:"/guide/service/emit-an-event.html#event-s-data"}},[t._v("Data")]),t._v(">")],1)]),t._v(" "),a("td",[a("code",[t._v("{}")])]),t._v(" "),a("td",[t._v("The structure of the event's data.")])])])]),t._v(" "),a("h3",{attrs:{id:"event-s-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-s-data"}},[t._v("#")]),t._v(" Event's data")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("Attribute")])]),t._v(" "),a("th",[a("strong",[t._v("Type")])]),t._v(" "),a("th",[a("strong",[t._v("Default")])]),t._v(" "),a("th",[a("strong",[t._v("Description")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("name")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("id")])]),t._v(" "),a("td",[t._v("Name of the data")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("description")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v('""')])]),t._v(" "),a("td",[t._v("Description of the data")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("type")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[a("RouterLink",{attrs:{to:"/guide/service/emit-an-event.html#data-s-type"}},[t._v("Type")])],1)]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[t._v("Type of data")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("object")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[a("RouterLink",{attrs:{to:"/guide/service/emit-an-event.html#event-s-data"}},[t._v("Data")])],1)]),t._v(" "),a("td",[a("code",[t._v("{}")])]),t._v(" "),a("td",[t._v("Nested data. Data can contain child data. It can only be defined when "),a("code",[t._v("type")]),t._v(" is "),a("code",[t._v("Object")])])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("optional")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("Boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("Mark the data as optional")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("repeated")])]),t._v(" "),a("td",[a("span",{staticClass:"type"},[t._v("Boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("Define this data as an array of the type selected")])])])]),t._v(" "),a("h3",{attrs:{id:"data-s-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-s-type"}},[t._v("#")]),t._v(" Data's type")]),t._v(" "),a("p",[t._v("The data type can be one of the following:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("String")])]),t._v(" "),a("li",[a("code",[t._v("Boolean")])]),t._v(" "),a("li",[a("code",[t._v("Number")])]),t._v(" "),a("li",[a("code",[t._v("Object")])]),t._v(" "),a("li",[a("code",[t._v("Any")])])]),t._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("p",[t._v("Example of an event definition in a "),a("RouterLink",{attrs:{to:"/guide/service/service-file.html"}},[a("code",[t._v("mesg.yml")])]),t._v(" file:")],1),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("events")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("eventX")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Event X"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is event X"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Foo"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Foo is a string"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" String\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("optional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bar"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bar is an optional array of boolean"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Boolean\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("optional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repeated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])])]),a("h2",{attrs:{id:"emit-an-event-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emit-an-event-2"}},[t._v("#")]),t._v(" Emit an Event")]),t._v(" "),a("p",[t._v("To emit an event, the service should call the mesg.emitEvent function with the event's key and event's data as parameters. This function returns a Promise.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Service "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@mesg/service'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mesg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmesg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eventX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  foo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  bar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://github.com/mesg-foundation/js-sdk/blob/master/packages/service/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("See the @mesg/service library for additional documentation"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("API definition")]),t._v(" "),a("p",[t._v("To see the API definition, check the "),a("RouterLink",{attrs:{to:"/api/event.html"}},[t._v("Event API definition")]),t._v(".")],1)]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Get Help")]),t._v(" "),a("p",[t._v("You need help ? Check out the "),a("a",{attrs:{href:"https://forum.mesg.com",target:"_blank"}},[t._v("MESG Forum")]),t._v(".")])])])}),[],!1,null,null,null);e.default=n.exports}}]);